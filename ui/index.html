<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NFT Rental Contract – Demo UI</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #050816;
        color: #f9fafb;
        margin: 0;
        padding: 0;
      }
      header {
        padding: 1.5rem 2rem;
        border-bottom: 1px solid #111827;
        background: radial-gradient(circle at top left, #22d3ee33, transparent 55%),
          radial-gradient(circle at bottom right, #a855f733, transparent 55%);
      }
      h1 {
        margin: 0;
        font-size: 1.6rem;
      }
      main {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1.5rem;
        padding: 1.5rem 2rem 3rem;
      }
      .panel {
        background: #020617;
        border-radius: 0.75rem;
        border: 1px solid #1f2937;
        padding: 1rem 1.25rem 1.5rem;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.8);
      }
      .panel h2 {
        margin-top: 0.25rem;
        font-size: 1.1rem;
      }
      label {
        display: block;
        font-size: 0.8rem;
        margin-bottom: 0.25rem;
        color: #9ca3af;
      }
      input {
        width: 100%;
        padding: 0.45rem 0.5rem;
        margin-bottom: 0.6rem;
        border-radius: 0.4rem;
        border: 1px solid #374151;
        background: #020617;
        color: #f9fafb;
      }
      button {
        padding: 0.45rem 0.9rem;
        border-radius: 999px;
        border: none;
        cursor: pointer;
        font-size: 0.85rem;
        background: linear-gradient(135deg, #22c55e, #22d3ee);
        color: #020617;
        font-weight: 600;
      }
      button.secondary {
        background: transparent;
        border: 1px solid #4b5563;
        color: #e5e7eb;
      }
      small {
        color: #6b7280;
        font-size: 0.75rem;
      }
      #log {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.75rem;
        max-height: 260px;
        overflow-y: auto;
        padding: 0.75rem;
        background: #020617;
        border-radius: 0.5rem;
        border: 1px dashed #1f2937;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.2rem 0.55rem;
        border-radius: 999px;
        background: #0f172a;
        border: 1px solid #1f2937;
        font-size: 0.7rem;
        color: #9ca3af;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>NFT Rental Contract – Gaming &amp; Metaverse Demo</h1>
      <p style="margin-top: 0.3rem; max-width: 640px; font-size: 0.9rem; color: #d1d5db;">
        Temporary access to NFTs without transferring ownership. Use this UI as a
        reference for wiring your wallet / Stacks.js integration to the
        <code>nft-rental</code> Clarinet contract.
      </p>
    </header>

    <main>
      <section class="panel">
        <div class="pill">Step 1 · Setup</div>
        <h2>Configure Contract</h2>
        <label for="contract-address">Contract address</label>
        <input
          id="contract-address"
          placeholder="ST... (deployer address)"
        />
        <label for="contract-name">Contract name</label>
        <input id="contract-name" value="nft-rental" />
        <small>
          In Clarinet simnet, the deployer address is usually the
          <code>deployer</code> account. On testnet/mainnet, paste the deployed
          contract address here.
        </small>
      </section>

      <section class="panel">
        <div class="pill">Step 2 · Creator</div>
        <h2>Mint &amp; List Game Asset</h2>
        <label for="mint-recipient">Mint recipient (principal)</label>
        <input
          id="mint-recipient"
          placeholder="ST... (lender / creator address)"
        />
        <button onclick="handleMint()">Mint NFT to creator</button>

        <hr style="border-color: #111827; margin: 1rem 0;" />

        <label for="list-token-id">Token ID</label>
        <input id="list-token-id" placeholder="e.g. 1" />
        <label for="price-per-block">Price per block (uSTX)</label>
        <input id="price-per-block" placeholder="e.g. 10" />
        <label for="max-duration">Max duration (blocks)</label>
        <input id="max-duration" placeholder="e.g. 100" />
        <button onclick="handleList()">List NFT for rent</button>
      </section>

      <section class="panel">
        <div class="pill">Step 3 · Player</div>
        <h2>Rent &amp; Use</h2>
        <label for="rent-token-id">Token ID to rent</label>
        <input id="rent-token-id" placeholder="e.g. 1" />
        <label for="rent-duration">Duration (blocks)</label>
        <input id="rent-duration" placeholder="e.g. 10" />
        <button onclick="handleRent()">Rent NFT</button>

        <hr style="border-color: #111827; margin: 1rem 0;" />

        <label for="can-use-user">User principal to check</label>
        <input id="can-use-user" placeholder="ST... (player or owner)" />
        <label for="can-use-token-id">Token ID</label>
        <input id="can-use-token-id" placeholder="e.g. 1" />
        <button class="secondary" onclick="handleCanUse()">Check can-use?</button>
      </section>

      <section class="panel">
        <div class="pill">Event Log</div>
        <h2>Simulated Calls</h2>
        <div id="log"></div>
        <small>
          This is a front-end skeleton: replace the console logging in
          <code>callContract</code> with actual Stacks.js / wallet transaction
          code when you are ready.
        </small>
      </section>
    </main>

    <script>
      function getConfig() {
        return {
          contractAddress: document.getElementById("contract-address").value.trim(),
          contractName: document.getElementById("contract-name").value.trim() || "nft-rental",
        };
      }

      function appendLog(message, payload) {
        const log = document.getElementById("log");
        const entry = document.createElement("div");
        entry.style.marginBottom = "0.45rem";
        entry.innerHTML = `<strong>${new Date().toLocaleTimeString()} »</strong> ${message}`;
        if (payload) {
          const pre = document.createElement("pre");
          pre.textContent = JSON.stringify(payload, null, 2);
          pre.style.margin = "0.25rem 0 0";
          pre.style.whiteSpace = "pre-wrap";
          entry.appendChild(pre);
        }
        log.prepend(entry);
      }

      // Placeholder function that shows exactly how we intend to talk to Clarity.
      // Swap this out for real @stacks/transactions calls against your network.
      function callContract(fn, args) {
        const { contractAddress, contractName } = getConfig();
        appendLog(`call ${fn}()`, { contractAddress, contractName, function: fn, args });
      }

      function handleMint() {
        const recipient = document.getElementById("mint-recipient").value.trim();
        if (!recipient) return alert("Enter a recipient principal");
        callContract("mint", ["principal", recipient]);
      }

      function handleList() {
        const tokenId = document.getElementById("list-token-id").value.trim();
        const pricePerBlock = document.getElementById("price-per-block").value.trim();
        const maxDuration = document.getElementById("max-duration").value.trim();
        if (!tokenId || !pricePerBlock || !maxDuration) {
          return alert("Fill token id, price per block and max duration");
        }
        callContract("list-for-rent", [
          ["uint", tokenId],
          ["uint", pricePerBlock],
          ["uint", maxDuration],
        ]);
      }

      function handleRent() {
        const tokenId = document.getElementById("rent-token-id").value.trim();
        const duration = document.getElementById("rent-duration").value.trim();
        if (!tokenId || !duration) return alert("Fill token id and duration");
        callContract("rent", [["uint", tokenId], ["uint", duration]]);
      }

      function handleCanUse() {
        const user = document.getElementById("can-use-user").value.trim();
        const tokenId = document.getElementById("can-use-token-id").value.trim();
        if (!user || !tokenId) return alert("Fill user principal and token id");
        callContract("can-use?", [["principal", user], ["uint", tokenId]]);
      }
    </script>
  </body>
</html>
